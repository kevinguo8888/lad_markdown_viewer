# CHANGELOG

## v1.0.0  (2025-06-30)

### 新增
- 支持 Markdown 图片和 Mermaid 流程图的点击放大、缩小、拖拽平移、重置等交互。
- 放大层采用全局唯一 overlay，支持多图/多图表独立操作。
- 组件内事件和样式作用域隔离，外部容器和全局 CSS/JS 不影响交互体验。
- 支持 GitHub 风格的 Markdown 渲染样式，兼容表格、代码块、流程图等多种内容。
- 兼容 Flask/Web/Python 环境，易于集成到各类 Web 项目。
- 完善的 a 标签拦截与外部链接回调机制，支持 md 文件内部跳转和外部链接自定义处理。

### 优化
- Mermaid 流程图自动居中、留白、最大宽度自适应，视觉体验接近 GitHub。
- 组件健壮性提升，支持多端复用和未来升级扩展。

### 修复
- 修正拖拽时 overlay 误关闭、事件冒泡冲突等问题。
- 修正图片/流程图缩放后内容可持续停留，体验与专业查看器一致。

---

> 未来版本计划：Shadow DOM 隔离、桌面端/移动端适配、iframe沙箱、CSP安全增强等，详见 UPGRADE_PLAN.md。

# 变更日志

本项目遵循 [语义化版本控制](https://semver.org/lang/zh-CN/) 规范。

## [1.3.0] - 2025-06-23

### 重大重构
- 重构 `preview_md.py` 使用统一的包架构
- 消除重复代码，代码行数减少25%（从224行减少到168行）
- 统一使用 `lad_markdown_viewer.markdown_processor.render_markdown_to_html`

### 核心模块优化
- **重构 `markdown_processor.py`**：
  - 将 `slugify` 函数移动到 `markdown_utils.py` 实现代码复用
  - 优化导入结构，使用相对导入 `from .markdown_utils import slugify`
  - 提高代码模块化程度，消除重复定义
- **改进 `markdown_utils.py`**：
  - 集中管理所有工具函数
  - 统一 `slugify` 函数实现，支持中文标题锚点生成

### 改进
- 优化预览工具的用户体验和帮助信息
- 修复Windows控制台编码问题
- 增强错误处理和用户提示
- 统一所有应用的Markdown处理逻辑

### 架构优化
- 完全消除代码重复，提高维护性
- 统一的功能特性支持（YAML表格、TOC跳转、Mermaid等）
- 更好的模块化设计和函数复用

## [1.2.0] - 2025-06-21

### 新增功能
- 完整的项目文档体系
- 独立的Python包结构
- Git版本控制支持
- 完整的README文档
- 贡献指南和API文档

### 改进
- 重构包结构，使用相对导入
- 优化文档组织结构
- 完善项目元数据

### 修复
- 修复包导入路径问题
- 清理冗余文件

## [1.1.0] - 2025-06-21

### 新增功能
- 可点击目录导航功能
- 自定义TocRenderer实现
- 支持中文标题的锚点ID生成
- 完整的包结构重构

### 改进
- 优化Markdown处理器架构
- 改进TOC链接的锚点匹配
- 增强slugify函数支持中文

### 修复
- 修复TOC链接跳转问题
- 修复中文标题锚点ID生成
- 修复包导入错误

## [1.0.0] - 2025-06-21

### 新增功能
- 基础Markdown渲染功能
- YAML前置元数据解析
- Mermaid图表支持
- Web界面（Flask）
- 桌面应用（PyQt5）
- 代码高亮支持

### 核心组件
- `markdown_processor.py` - 核心处理逻辑
- `ladmark_viewer.py` - PyQt5桌面应用
- `markdown_utils.py` - 工具函数
- Web应用入口脚本

### 插件支持
- 表格渲染
- 任务列表
- 删除线
- 自动链接
- 脚注

---

## 版本说明

### 主版本号 (Major)
- 不兼容的API修改

### 次版本号 (Minor)
- 向下兼容的功能性新增

### 修订号 (Patch)
- 向下兼容的问题修正

---

**最后更新**：2025-06-23 10:42 